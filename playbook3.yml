---
- hosts: webserver2
  name: Simple nginx example Vagrant Ansible Local
  become: yes

  tasks:

  - name: Remove apt lock file
    file:
      state: absent
      path: "/var/lib/apt/lists/lock"
    become: true
    tags: apt

  - name: Remove apt lock-frontend file
    file:
      state: absent
      path: "/var/lib/dpkg/lock-frontend"
    become: true
    tags: apt

  - name: Update apt cache
    apt:
       update_cache: no

  - name: Install nginx
    apt:
      name: nginx
      state: present

  - name: Insert Index Page
    template:
      src: index.html
      dest: /usr/share/nginx/html/index.html

  - name: Start NGiNX
    service:
      name: nginx
      state: started

